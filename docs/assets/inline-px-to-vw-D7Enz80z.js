import{W as We,n as me,d as be,a0 as ze,a1 as he,h as b,D as q,C as Q,L as z,a2 as ye,P as ve,a3 as De,a4 as qe,a5 as pe,a6 as Ge,a7 as He,a8 as Ke,Z as D,a9 as Ye,T as Ue,k as H,aa as Je,c as C,p as ee,ab as Xe,v as Ze,J as W,o as Qe,ac as et,B as tt,G as _,ad as te,E as nt,ae as rt,I as K,af as at,A as ne,l as it,K as ot,ag as lt,a as st,b as ct,w as ut,ah as ft}from"./index-BN_AR-Rj.js";import{c as dt,C as gt}from"./index-nmoiwxye.js";import{B as mt}from"./index-CV04fl1I.js";let bt=0;function ht(){const e=We(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return"".concat(n,"-").concat(++bt)}const[yt,vt]=me("form"),St={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:q,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:Q,showErrorMessage:Q,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var It=be({name:yt,props:St,emits:["submit","failed"],setup(e,{emit:n,slots:r}){const{children:o,linkChildren:a}=ze(ye),u=i=>i?o.filter(c=>i.includes(c.name)):o,$=i=>new Promise((c,d)=>{const v=[];u(i).reduce((G,A)=>G.then(()=>{if(!v.length)return A.validate().then(j=>{j&&v.push(j)})}),Promise.resolve()).then(()=>{v.length?d(v):c()})}),B=i=>new Promise((c,d)=>{const v=u(i);Promise.all(v.map(h=>h.validate())).then(h=>{h=h.filter(Boolean),h.length?d(h):c()})}),y=i=>{const c=o.find(d=>d.name===i);return c?new Promise((d,v)=>{c.validate().then(h=>{h?v(h):d()})}):Promise.reject()},T=i=>typeof i=="string"?y(i):e.validateFirst?$(i):B(i),g=i=>{typeof i=="string"&&(i=[i]),u(i).forEach(d=>{d.resetValidation()})},p=()=>o.reduce((i,c)=>(i[c.name]=c.getValidationStatus(),i),{}),M=(i,c)=>{o.some(d=>d.name===i?(d.$el.scrollIntoView(c),!0):!1)},N=()=>o.reduce((i,c)=>(c.name!==void 0&&(i[c.name]=c.formValue.value),i),{}),L=()=>{const i=N();T().then(()=>n("submit",i)).catch(c=>{n("failed",{values:i,errors:c});const{scrollToError:d,scrollToErrorPosition:v}=e;d&&c[0].name&&M(c[0].name,v?{block:v}:void 0)})},k=i=>{z(i),L()};return a({props:e}),he({submit:L,validate:T,getValues:N,scrollToField:M,resetValidation:g,getValidationStatus:p}),()=>{var i;return b("form",{class:vt(),onSubmit:k},[(i=r.default)==null?void 0:i.call(r)])}}});const gn=ve(It);function Se(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Tt(e,n){if(Se(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function wt(e,n){return new Promise(r=>{const o=n.validator(e,n);if(Ge(o)){o.then(r);return}r(o)})}function re(e,n){const{message:r}=n;return He(r)?r(e,n):r||""}function xt({target:e}){e.composing=!0}function ae({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Et(e,n){const r=De();e.style.height="auto";let o=e.scrollHeight;if(pe(n)){const{maxHeight:a,minHeight:u}=n;a!==void 0&&(o=Math.min(o,a)),u!==void 0&&(o=Math.max(o,u))}o&&(e.style.height="".concat(o,"px"),qe(r))}function Vt(e,n){return e==="number"&&(e="text",n!=null||(n="decimal")),e==="digit"&&(e="tel",n!=null||(n="numeric")),{type:e,inputmode:n}}function x(e){return[...e].length}function Y(e,n){return[...e].slice(0,n).join("")}const[kt,S]=me("field"),Ct={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:q,max:Number,min:Number,formatter:Function,clearIcon:D("clear"),modelValue:tt(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:D("focus"),formatTrigger:D("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},_t=Ke({},dt,Ct,{rows:q,type:D("text"),rules:Array,autosize:[Boolean,Object],labelWidth:q,labelClass:Ye,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Pt=be({name:kt,props:_t,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:r}){const o=ht(),a=Ue({status:"unvalidated",focused:!1,validateMessage:""}),u=H(),$=H(),B=H(),{parent:y}=Je(ye),T=()=>{var t;return String((t=e.modelValue)!=null?t:"")},g=t=>{if(_(e[t]))return e[t];if(y&&_(y.props[t]))return y.props[t]},p=C(()=>{const t=g("readonly");if(e.clearable&&!t){const l=T()!=="",s=e.clearTrigger==="always"||e.clearTrigger==="focus"&&a.focused;return l&&s}return!1}),M=C(()=>B.value&&r.input?B.value():e.modelValue),N=C(()=>{var t;const l=g("required");return l==="auto"?(t=e.rules)==null?void 0:t.some(s=>s.required):l}),L=t=>t.reduce((l,s)=>l.then(()=>{if(a.status==="failed")return;let{value:f}=M;if(s.formatter&&(f=s.formatter(f,s)),!Tt(f,s)){a.status="failed",a.validateMessage=re(f,s);return}if(s.validator)return Se(f)&&s.validateEmpty===!1?void 0:wt(f,s).then(m=>{m&&typeof m=="string"?(a.status="failed",a.validateMessage=m):m===!1&&(a.status="failed",a.validateMessage=re(f,s))})}),Promise.resolve()),k=()=>{a.status="unvalidated",a.validateMessage=""},i=()=>n("endValidate",{status:a.status,message:a.validateMessage}),c=(t=e.rules)=>new Promise(l=>{k(),t?(n("startValidate"),L(t).then(()=>{a.status==="failed"?(l({name:e.name,message:a.validateMessage}),i()):(a.status="passed",l(),i())})):l()}),d=t=>{if(y&&e.rules){const{validateTrigger:l}=y.props,s=te(l).includes(t),f=e.rules.filter(m=>m.trigger?te(m.trigger).includes(t):s);f.length&&c(f)}},v=t=>{var l;const{maxlength:s}=e;if(_(s)&&x(t)>+s){const f=T();if(f&&x(f)===+s)return f;const m=(l=u.value)==null?void 0:l.selectionEnd;if(a.focused&&m){const E=[...t],V=E.length-+s;return E.splice(m-V,V),E.join("")}return Y(t,+s)}return t},h=(t,l="onChange")=>{var s,f;const m=t;t=v(t);const E=x(m)-x(t);if(e.type==="number"||e.type==="digit"){const I=e.type==="number";t=nt(t,I,I),l==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)&&(t=rt(+t,(s=e.min)!=null?s:-1/0,(f=e.max)!=null?f:1/0).toString())}let V=0;if(e.formatter&&l===e.formatTrigger){const{formatter:I,maxlength:w}=e;if(t=I(t),_(w)&&x(t)>+w&&(t=Y(t,+w)),u.value&&a.focused){const{selectionEnd:R}=u.value,Z=Y(m,R);V=x(I(Z))-x(Z)}}if(u.value&&u.value.value!==t)if(a.focused){let{selectionStart:I,selectionEnd:w}=u.value;if(u.value.value=t,_(I)&&_(w)){const R=x(t);E?(I-=E,w-=E):V&&(I+=V,w+=V),u.value.setSelectionRange(Math.min(I,R),Math.min(w,R))}}else u.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},G=t=>{t.target.composing||h(t.target.value)},A=()=>{var t;return(t=u.value)==null?void 0:t.blur()},j=()=>{var t;return(t=u.value)==null?void 0:t.focus()},F=()=>{const t=u.value;e.type==="textarea"&&e.autosize&&t&&Et(t,e.autosize)},Ve=t=>{a.focused=!0,n("focus",t),W(F),g("readonly")&&A()},ke=t=>{a.focused=!1,h(T(),"onBlur"),n("blur",t),!g("readonly")&&(d("onBlur"),W(F),ot())},U=t=>n("clickInput",t),Ce=t=>n("clickLeftIcon",t),_e=t=>n("clickRightIcon",t),Pe=t=>{z(t),n("update:modelValue",""),n("clear",t)},J=C(()=>{if(typeof e.error=="boolean")return e.error;if(y&&y.props.showError&&a.status==="failed")return!0}),Be=C(()=>{const t=g("labelWidth"),l=g("labelAlign");if(t&&l!=="top")return{width:ee(t)}}),Me=t=>{t.keyCode===13&&(!(y&&y.props.submitOnEnter)&&e.type!=="textarea"&&z(t),e.type==="search"&&A()),n("keypress",t)},X=()=>e.id||"".concat(o,"-input"),Ae=()=>a.status,je=()=>{const t=S("control",[g("inputAlign"),{error:J.value,custom:!!r.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(r.input)return b("div",{class:t,onClick:U},[r.input()]);const l={id:X(),ref:u,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?"".concat(o,"-label"):void 0,"data-allow-mismatch":"attribute",onBlur:ke,onFocus:Ve,onInput:G,onClick:U,onChange:ae,onKeypress:Me,onCompositionend:ae,onCompositionstart:xt};return e.type==="textarea"?b("textarea",ne(l,{inputmode:e.inputmode}),null):b("input",ne(Vt(e.type,e.inputmode),l),null)},Oe=()=>{const t=r["left-icon"];if(e.leftIcon||t)return b("div",{class:S("left-icon"),onClick:Ce},[t?t():b(K,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},$e=()=>{const t=r["right-icon"];if(e.rightIcon||t)return b("div",{class:S("right-icon"),onClick:_e},[t?t():b(K,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ne=()=>{if(e.showWordLimit&&e.maxlength){const t=x(T());return b("div",{class:S("word-limit")},[b("span",{class:S("word-num")},[t]),it("/"),e.maxlength])}},Le=()=>{if(y&&y.props.showErrorMessage===!1)return;const t=e.errorMessage||a.validateMessage;if(t){const l=r["error-message"],s=g("errorMessageAlign");return b("div",{class:S("error-message",s)},[l?l({message:t}):t])}},Fe=()=>{const t=g("labelWidth"),l=g("labelAlign"),s=g("colon")?":":"";if(r.label)return[r.label(),s];if(e.label)return b("label",{id:"".concat(o,"-label"),for:r.input?void 0:X(),"data-allow-mismatch":"attribute",onClick:f=>{z(f),j()},style:l==="top"&&t?{width:ee(t)}:void 0},[e.label+s])},Re=()=>[b("div",{class:S("body")},[je(),p.value&&b(K,{ref:$,name:e.clearIcon,class:S("clear")},null),$e(),r.button&&b("div",{class:S("button")},[r.button()])]),Ne(),Le()];return he({blur:A,focus:j,validate:c,formValue:M,resetValidation:k,getValidationStatus:Ae}),Xe(at,{customValue:B,resetValidation:k,validateWithTrigger:d}),Ze(()=>e.modelValue,()=>{h(T()),k(),d("onChange"),W(F)}),Qe(()=>{h(T(),e.formatTrigger),W(F)}),et("touchstart",Pe,{target:C(()=>{var t;return(t=$.value)==null?void 0:t.$el})}),()=>{const t=g("disabled"),l=g("labelAlign"),s=Oe(),f=()=>{const m=Fe();return l==="top"?[s,m].filter(Boolean):m||[]};return b(gt,{size:e.size,class:S({error:J.value,disabled:t,["label-".concat(l)]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Be.value,valueClass:S("value"),titleClass:[S("label",[l,{required:N.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:s&&l!=="top"?()=>s:null,title:f,value:Re,extra:r.extra})}}});const mn=ve(Pt),Bt={};function Mt(e,n){const r=mt;return st(),ct(r,{size:"small",plain:"",type:"primary"},{default:ut(()=>[ft(e.$slots,"default",{},void 0,!0)]),_:3})}const bn=lt(Bt,[["render",Mt],["__scopeId","data-v-68745b04"]]);var At=typeof global=="object"&&global&&global.Object===Object&&global,jt=typeof self=="object"&&self&&self.Object===Object&&self,Ie=At||jt||Function("return this")(),P=Ie.Symbol,Te=Object.prototype,Ot=Te.hasOwnProperty,$t=Te.toString,O=P?P.toStringTag:void 0;function Nt(e){var n=Ot.call(e,O),r=e[O];try{e[O]=void 0;var o=!0}catch(u){}var a=$t.call(e);return o&&(n?e[O]=r:delete e[O]),a}var Lt=Object.prototype,Ft=Lt.toString;function Rt(e){return Ft.call(e)}var Wt="[object Null]",zt="[object Undefined]",ie=P?P.toStringTag:void 0;function Dt(e){return e==null?e===void 0?zt:Wt:ie&&ie in Object(e)?Nt(e):Rt(e)}function qt(e){return e!=null&&typeof e=="object"}var pt="[object Symbol]";function we(e){return typeof e=="symbol"||qt(e)&&Dt(e)==pt}function Gt(e,n){for(var r=-1,o=e==null?0:e.length,a=Array(o);++r<o;)a[r]=n(e[r],r,e);return a}var Ht=Array.isArray,Kt=1/0,oe=P?P.prototype:void 0,le=oe?oe.toString:void 0;function xe(e){if(typeof e=="string")return e;if(Ht(e))return Gt(e,xe)+"";if(we(e))return le?le.call(e):"";var n=e+"";return n=="0"&&1/e==-Kt?"-0":n}var Yt=/\s/;function Ut(e){for(var n=e.length;n--&&Yt.test(e.charAt(n)););return n}var Jt=/^\s+/;function Xt(e){return e&&e.slice(0,Ut(e)+1).replace(Jt,"")}function se(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var ce=NaN,Zt=/^[-+]0x[0-9a-f]+$/i,Qt=/^0b[01]+$/i,en=/^0o[0-7]+$/i,tn=parseInt;function Ee(e){if(typeof e=="number")return e;if(we(e))return ce;if(se(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=se(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Xt(e);var r=Qt.test(e);return r||en.test(e)?tn(e.slice(2),r?2:8):Zt.test(e)?ce:+e}var ue=1/0,nn=17976931348623157e292;function rn(e){if(!e)return e===0?e:0;if(e=Ee(e),e===ue||e===-ue){var n=e<0?-1:1;return n*nn}return e===e?e:0}function an(e){var n=rn(e),r=n%1;return n===n?r?n-r:n:0}function fe(e){return e==null?"":xe(e)}var on=Ie.isFinite,ln=Math.min;function sn(e){var n=Math[e];return function(r,o){if(r=Ee(r),o=o==null?0:ln(an(o),292),o&&on(r)){var a=(fe(r)+"e").split("e"),u=n(a[0]+"e"+(+a[1]+o));return a=(fe(u)+"e").split("e"),+(a[0]+"e"+(+a[1]-o))}return n(r)}}var de=sn("round");const ge=375,cn=600;function hn(e){if(e===0)return e;const n=de(e*100/ge,3),r=de(e*cn/ge,3),o=e>0?"min":"max";return"".concat(o,"(").concat(n,"vw, ").concat(r,"px)")}export{gn as F,bn as _,mn as a,hn as v};
